<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generatore Invito â€“ Ciccio's</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#ffd54f;
      --ink:#f3f4f6;
      --muted:#b8bec8;
      --card-bg:#0e0e0e;
      --page-bg:#000;
      --radius:24px;
    }
    body{
      margin:0;
      background:var(--page-bg);
      font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--ink);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      padding:24px;
    }
    .generator{
      width:min(600px,95vw);
      background:var(--card-bg);
      border-radius:var(--radius);
      box-shadow:0 10px 30px rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.08);
      padding:32px 28px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    h1{
      font-family:"Playfair Display",serif;
      font-weight:700;
      font-size:clamp(26px,5vw,36px);
      margin:0 0 6px;
    }
    label{font-weight:600; font-size:15px; display:block; margin-top:12px;}
    input{
      width:100%; padding:10px 12px; margin-top:6px;
      border-radius:12px; border:1px solid rgba(255,255,255,.2);
      background:#121212; color:var(--ink); font-size:15px;
    }
    input:focus{outline:none;border-color:var(--accent);}
    .btn{cursor:pointer;border:none;padding:12px 16px;border-radius:14px;
      font-weight:700;display:inline-block;text-decoration:none;font-size:15px;}
    .btn.accent{background:var(--accent);color:#000;}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.2);color:var(--ink);}
    .btn.accent:hover{box-shadow:0 8px 16px rgba(255,213,79,.25);}
    .btn.ghost:hover{border-color:rgba(255,255,255,.35);}
    .actions{margin-top:18px;display:flex;gap:12px;flex-wrap:wrap;}
    .output{margin-top:20px;font-size:.9rem;word-break:break-all;background:#121212;padding:14px;border-radius:12px;}
    .output a{color:var(--accent);text-decoration:none;}
  </style>
</head>
<body>
  <div class="generator">
    <h1>Generatore invito</h1>
    <label>Nome bambino
      <input id="nome" placeholder="Es. Matteo">
    </label>
    <label>Anni
      <input id="anni" type="number" placeholder="Es. 8">
    </label>
    <label>Data
      <input id="data" type="date">
    </label>
    <label>Orario
      <input id="ora" type="time">
    </label>
    <label>Telefono
      <input id="tel" placeholder="333333333333">
    </label>

    <div class="actions">
      <button class="btn accent" onclick="genera()">Genera link</button>
      <button class="btn ghost" onclick="resetForm()">Reset</button>
    </div>

    <div id="out" class="output" hidden></div>
  </div>

<script>
function toBase64Url(str) {
  return btoa(str)
    .replace(/\+/g,"-")
    .replace(/\//g,"_")
    .replace(/=+$/,"");
}

function genera(){
  const nome=document.getElementById("nome").value.trim();
  const anni=document.getElementById("anni").value.trim();
  const data=document.getElementById("data").value.trim();
  const ora=document.getElementById("ora").value.trim();
  const tel=document.getElementById("tel").value.trim();

  if(!nome||!anni||!data||!ora||!tel){
    alert("Compila tutti i campi");
    return;
  }

  // formato CSV con virgole
  const payload=`${nome},${anni},${data},${ora},${tel}`;
  const encoded=toBase64Url(payload);

  const url="https://cicciosburger.it/invito/?d="+encoded;
  const out=document.getElementById("out");
  out.hidden=false;
  out.innerHTML=`
    <strong>URL completo:</strong><br>
    <a href="${url}" target="_blank">${url}</a><br><br>
    <button class="btn accent" onclick="window.open('${url}','_blank')">Apri subito invito</button>
  `;
}

function resetForm(){
  document.getElementById("nome").value="";
  document.getElementById("anni").value="";
  document.getElementById("data").value="";
  document.getElementById("ora").value="";
  document.getElementById("tel").value="";
  document.getElementById("out").hidden=true;
}
</script>
</body>
</html>
